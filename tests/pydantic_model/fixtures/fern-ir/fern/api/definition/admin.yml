imports:
  submission: submission.yml
  problemV2: v2/problem.yml

types:
  StoreTracedTestCaseRequest:
    properties:
      result: submission.TestCaseResultWithStdout
      traceResponses: list<submission.TraceResponse>

  StoreTracedWorkspaceRequest:
    properties:
      workspaceRunDetails: submission.WorkspaceRunDetails
      traceResponses: list<submission.TraceResponse>

services:
  http:
    AdminService:
      auth: false
      base-path: /admin
      endpoints:
        updateTestSubmissionStatus:
          path: /store-test-submission-status/{submissionId}
          path-parameters:
            submissionId: submission.SubmissionId
          request: submission.TestSubmissionStatus
          method: POST

        sendTestSubmissionUpdate:
          path: /store-test-submission-status-v2/{submissionId}
          path-parameters:
            submissionId: submission.SubmissionId
          request: submission.TestSubmissionUpdate
          method: POST

        updateWorkspaceSubmissionStatus:
          path: /store-workspace-submission-status/{submissionId}
          path-parameters:
            submissionId: submission.SubmissionId
          request: submission.WorkspaceSubmissionStatus
          method: POST

        sendWorkspaceSubmissionUpdate:
          path: /store-workspace-submission-status-v2/{submissionId}
          path-parameters:
            submissionId: submission.SubmissionId
          request: submission.WorkspaceSubmissionUpdate
          method: POST

        storeTracedTestCase:
          path: /store-test-trace/submission/{submissionId}/testCase/{testCaseId}
          path-parameters:
            submissionId: submission.SubmissionId
            testCaseId: string
          request: StoreTracedTestCaseRequest
          method: POST

        storeTracedTestCaseV2:
          path: /store-test-trace-v2/submission/{submissionId}/testCase/{testCaseId}
          path-parameters:
            submissionId: submission.SubmissionId
            testCaseId: problemV2.TestCaseId
          request: list<submission.TraceResponseV2>
          method: POST

        storeTracedWorkspace:
          path: /store-workspace-trace/submission/{submissionId}
          path-parameters:
            submissionId: submission.SubmissionId
          request: StoreTracedWorkspaceRequest
          method: POST

        storeTracedWorkspaceV2:
          path: /store-workspace-trace-v2/submission/{submissionId}
          path-parameters:
            submissionId: submission.SubmissionId
          request: list<submission.TraceResponseV2>
          method: POST
